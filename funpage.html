<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Funpage</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container text-center mt-4">
  <h1 class="mb-4">Fun game: Match the purpose to the room :]</h1>
  <p>Drag each purpose to its correct room:</p>

  <div class="row">
    <div class="col-md-6">
      <h3>Purposes</h3>
      <div class="d-flex flex-wrap justify-content-center gap-2" id="purposes">
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="MeetingRoom">Conduct a business meeting</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="Cinema">Host a movie night</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="PodcastStudio">Record a podcast episode</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="MeetingRoom">Have a study session</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="MeetingRoom">Interview potential employees</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="Cinema">Watch a live football match</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="PodcastStudio">Practice voiceovers</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="MeetingRoom">Team brainstorming session</div>
        <div class="card p-3 border border-secondary rounded" draggable="true" data-room="Cinema">Present a short documentary</div>
      </div>
    </div>

    <div class="col-md-6">
      <h3>Rooms</h3>
      <div class="d-flex flex-wrap justify-content-center gap-2">
        <div class="card p-4 border border-secondary rounded" data-room="MeetingRoom" style="min-width:200px; background-color: rgb(236, 234, 234); cursor: pointer;">Meeting room</div>
        <div class="card p-4 border border-secondary rounded" data-room="PodcastStudio" style="min-width:200px; background-color: rgb(236, 234, 234); cursor: pointer;">Podcast studio</div>
        <div class="card p-4 border border-secondary rounded" data-room="Cinema" style="min-width:200px; background-color: rgb(236, 234, 234); cursor: pointer;">Cinema</div>
      </div>
    </div>
  </div>

<script>
let draggedItem = null; //variable to save dragged cards - start as empty

function winCheck() { // to check if all correct
  let remainingCards = document.querySelectorAll('.card[draggable="true"]'); //select all cards still available
  if (remainingCards.length === 0) { //if no cards left = all cards dropped correctly
    setTimeout(() => { // delay time for a win alert
      alert('ðŸŽ‰ Yaaayyy ! you WON, All purposes are correctly matched! ðŸŽ‰'); //win alert
    }, 200); // time is 0.2 second
  }
}

let cards = document.querySelectorAll('.card[draggable="true"]'); // select all draggable cards
for (let i = 0; i < cards.length; i++) {
  cards[i].addEventListener('dragstart', function(e) {  // use the dragstart from the the drag and drop api
    draggedItem = cards[i]; //add the dragged card to draggedItem
  });
}

let dropZones = document.querySelectorAll('.card:not([draggable])'); // select all drop zones available (spot to drop)
for (let j = 0; j < dropZones.length; j++) {
  dropZones[j].addEventListener('dragover', function(e) { 
    e.preventDefault(); // allow card to be dropped by preventing the default
  });

  dropZones[j].addEventListener('drop', function(e) { 
    let expectedRoom = dropZones[j].dataset.room; // get expected room for the drop zone data
    let trueRoom = draggedItem.dataset.room; // get the true room of the dragged card

    if (expectedRoom == trueRoom) { //check if they are the same
      dropZones[j].classList.add('border-success', 'bg-success-subtle'); //add correct class for style
      dropZones[j].innerHTML += '<div class="mt-2">' + draggedItem.innerHTML + '</div>'; //add it to the drop zone
      draggedItem.parentNode.removeChild(draggedItem); //remove it from cards
      winCheck(); //check if all done
    } else {
      dropZones[j].classList.add('border-danger', 'bg-danger-subtle'); // if not correct add wrong style
    }

    setTimeout(function() { //time for the wrong styling to be removed
      dropZones[j].classList.remove('border-danger', 'bg-danger-subtle');
    }, 2000); // 2 seconds
  });
}
</script>

</div>
</body>
</html>
